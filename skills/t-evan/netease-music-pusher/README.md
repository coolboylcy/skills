# ç½‘æ˜“äº‘éŸ³ä¹æ¨é€æŠ€èƒ½

> ä¸€é”®è·å–ç½‘æ˜“äº‘æ¯æ—¥æ¨èï¼Œæ”¯æŒéªŒè¯ç ç™»å½•è·å–ä¸ªæ€§åŒ–å†…å®¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip3 install cryptography
```

### 2. é¦–æ¬¡ç™»å½•

```bash
cd /root/.openclaw/workspace

# Step 1: å‘é€éªŒè¯ç 
python3 skills/netease-music-pusher/scripts/netease_client.py send_captcha 17651730816

# Step 2: æ”¶åˆ°éªŒè¯ç åç™»å½•ï¼ˆæŠŠ7725æ¢æˆä½ æ”¶åˆ°çš„éªŒè¯ç ï¼‰
python3 skills/netease-music-pusher/scripts/netease_client.py login 17651730816 7725
```

### 3. è·å–æ—¥æ¨

```bash
# è·å–ä¸ªæ€§åŒ–æ—¥æ¨
python3 skills/netease-music-pusher/scripts/netease_client.py daily
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸµ ç½‘æ˜“äº‘æ—¥æ¨
ğŸ“… 02æœˆ18æ—¥
ğŸ’ ä¸“å±äºä½ çš„æ¯æ—¥æ¨è
========================================

 1. Yellow
    ğŸ¤ Coldplay
    ğŸ’¿ Yellow
    ğŸ’¡ æ˜¨æ—¥åä¸‡æ’­æ”¾
    ğŸ”— https://music.163.com/song?id=17177324

 2. æ˜¥çš„å¥³å­©
    ğŸ¤ ç”ŸçŸ³ç°æ‹Œè›‹1.0
    ğŸ’¿ æ˜¥çš„å¥³å­©
    ğŸ’¡ è¶…85%äººæ’­æ”¾
    ğŸ”— https://music.163.com/song?id=2071222896

 9. The Winner Is
    ğŸ¤ Mychael Danna
    ğŸ’¿ Little Miss Sunshine
    ğŸ·ï¸ ç”µå½±ã€Šé˜³å…‰å°ç¾å¥³ã€‹æœ€çƒ­é…ä¹
    ğŸ”— https://music.163.com/song?id=3038433

...
```

### æ¨é€å†…å®¹è¯´æ˜

| ä¿¡æ¯ | è¯´æ˜ |
|------|------|
| ğŸ¤ æ­Œæ‰‹ | æ¼”å”±è€…åç§° |
| ğŸ’¿ ä¸“è¾‘ | æ‰€å±ä¸“è¾‘ |
| ğŸ’¡ æ¨èç†ç”± | çƒ­åº¦æŒ‡æ ‡ï¼ˆå¦‚"åä¸‡çº¢å¿ƒ"ã€"è¶…85%äººæ’­æ”¾"ï¼‰|
| ğŸ·ï¸ åˆ«åæ ‡ç­¾ | æ­Œæ›²åˆ«åæˆ–åœºæ™¯æ ‡æ³¨ |
| ğŸ”— æ­Œæ›²é“¾æ¥ | ç‚¹å‡»ç›´è¾¾ç½‘æ˜“äº‘éŸ³ä¹ |

**å…³äºé£æ ¼æ ‡ç­¾**: ç½‘æ˜“äº‘APIå¯¹æ­Œæ›²é£æ ¼æ ‡ç­¾çš„æ”¯æŒæœ‰é™ï¼Œå½“å‰é€šè¿‡æ¨èç†ç”±å’Œåˆ«åæ ‡ç­¾æ¥åæ˜ æ­Œæ›²ç‰¹ç‚¹å’Œçƒ­åº¦ã€‚

## ğŸ“‹ å‘½ä»¤è¯´æ˜

### netease_client.py

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `send_captcha <æ‰‹æœºå·>` | å‘é€éªŒè¯ç  | `send_captcha 17651730816` |
| `login <æ‰‹æœºå·> <éªŒè¯ç >` | éªŒè¯ç ç™»å½• | `login 17651730816 7725` |
| `daily` | è·å–æ—¥æ¨ | `daily` |
| `status` | æ£€æŸ¥ç™»å½•çŠ¶æ€ | `status` |

### netease_public_api.pyï¼ˆæ— éœ€ç™»å½•ï¼‰

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `daily` | è·å–é£™å‡æ¦œ |
| `é£™å‡æ¦œ` | é£™å‡æ¦œ |
| `æ–°æ­Œæ¦œ` | æ–°æ­Œæ¦œ |
| `åŸåˆ›æ¦œ` | åŸåˆ›æ¦œ |
| `çƒ­æ­Œæ¦œ` | çƒ­æ­Œæ¦œ |

## â° é…ç½®å®šæ—¶æ¨é€

### OpenClawå®šæ—¶ä»»åŠ¡

```bash
# æŸ¥çœ‹å½“å‰ä»»åŠ¡
openclaw cron list

# æ·»åŠ ç½‘æ˜“äº‘æ—¥æ¨ä»»åŠ¡ï¼ˆæ¯å¤©8:00æ¨é€ï¼‰
openclaw cron add \
  --name "ç½‘æ˜“äº‘æ—¥æ¨" \
  --schedule "0 8 * * *" \
  --command "python3 skills/netease-music-pusher/scripts/netease_client.py daily"
```

æˆ–ä½¿ç”¨cronå·¥å…·ï¼š

```bash
# æ·»åŠ ä»»åŠ¡ï¼ˆåŒ—äº¬æ—¶é—´æ¯å¤©8:00ï¼‰
curl -X POST "http://localhost:8000/cron/jobs" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ç½‘æ˜“äº‘æ—¥æ¨æ¨é€",
    "schedule": "0 8 * * *",
    "timezone": "Asia/Shanghai",
    "command": "cd /root/.openclaw/workspace && python3 skills/netease-music-pusher/scripts/netease_client.py daily"
  }'
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ç™»å½•æµç¨‹

```
1. å‘é€éªŒè¯ç 
   POST /weapi/sms/captcha/sent
   { cellphone: "æ‰‹æœºå·", ctcode: "86" }
   
2. éªŒè¯ç ç™»å½•
   POST /weapi/login/cellphone
   { phone: "æ‰‹æœºå·", captcha: "éªŒè¯ç ", countrycode: "86" }
   
3. ä¿å­˜Cookies â†’ secrets/netease_cookies.json
```

### æ—¥æ¨æ¥å£

```
POST /weapi/v1/discovery/recommend/songs
Headers: Cookies (MUSIC_U, __csrfç­‰)
è¿”å›: { code: 200, data: { dailySongs: [...] } }
```

### åŠ å¯†ç®—æ³•

ç½‘æ˜“äº‘APIä½¿ç”¨ä¸¤å±‚åŠ å¯†ï¼š

```python
# 1. AES-CBCåŠ å¯†ï¼ˆä¸¤æ¬¡ï¼‰
text = json.dumps(params)
enc1 = AES.encrypt(text, NONCE)  # å›ºå®šå¯†é’¥
enc2 = AES.encrypt(enc1, secKey) # éšæœºå¯†é’¥

# 2. RSAåŠ å¯†éšæœºå¯†é’¥
encSecKey = RSA.encrypt(secKey, PUBKEY, MODULUS)

# 3. å‘é€
POST data: { params: enc2, encSecKey: encSecKey }
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
skills/netease-music-pusher/
â”œâ”€â”€ SKILL.md                    # æŠ€èƒ½è¯´æ˜
â”œâ”€â”€ README.md                   # æœ¬æ–‡ä»¶
â””â”€â”€ scripts/
    â”œâ”€â”€ netease_client.py      # ä¸»å®¢æˆ·ç«¯ï¼ˆç™»å½•+æ—¥æ¨ï¼‰
    â””â”€â”€ netease_public_api.py  # å…¬å¼€æ¦œå•API
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç™»å½•æœ‰æ•ˆæœŸ**: Cookiesé€šå¸¸7-30å¤©æœ‰æ•ˆï¼Œè¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•
2. **éªŒè¯ç é¢‘ç‡**: ä¸è¦é¢‘ç¹å‘é€éªŒè¯ç ï¼Œé¿å…è§¦å‘é£æ§
3. **è´¦å·å®‰å…¨**: éªŒè¯ç ç™»å½•æ¯”å¯†ç ç™»å½•æ›´å®‰å…¨ï¼Œä¸å­˜å‚¨æ•æ„Ÿä¿¡æ¯
4. **ç½‘ç»œè¦æ±‚**: éœ€è¦èƒ½è®¿é—®ç½‘æ˜“äº‘éŸ³ä¹åŸŸåï¼ˆmusic.163.comï¼‰

## ğŸ” æ•…éšœæ’æŸ¥

### éªŒè¯ç æ”¶ä¸åˆ°

- æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦æ­£ç¡®
- ç­‰å¾…2-3åˆ†é’Ÿåé‡è¯•
- æ£€æŸ¥æ‰‹æœºçŸ­ä¿¡æ‹¦æˆªè®¾ç½®

### ç™»å½•å¤±è´¥

- éªŒè¯ç æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
- éªŒè¯ç æ˜¯å¦è¿‡æœŸï¼ˆ5åˆ†é’Ÿæœ‰æ•ˆï¼‰
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### æ—¥æ¨è·å–å¤±è´¥

- æ£€æŸ¥ç™»å½•çŠ¶æ€: `python3 scripts/netease_client.py status`
- å¦‚å·²è¿‡æœŸï¼Œé‡æ–°æ‰§è¡Œç™»å½•æµç¨‹

### é£æ ¼æ ‡ç­¾ç¼ºå¤±

**ç°è±¡**: æ¨é€ä¸­ç¼ºå°‘æ­Œæ›²é£æ ¼æ ‡ç­¾

**åŸå› **: ç½‘æ˜“äº‘å®˜æ–¹APIå¯¹æ­Œæ›²é£æ ¼æ ‡ç­¾çš„æ”¯æŒæœ‰é™ï¼Œå¤§éƒ¨åˆ†æ­Œæ›²ä¸è¿”å›é£æ ¼å­—æ®µ

**å½“å‰æ›¿ä»£æ–¹æ¡ˆ**:
- æ¨èç†ç”±ï¼ˆå¦‚"åä¸‡çº¢å¿ƒ"ã€"è¶…85%äººæ’­æ”¾"ï¼‰åæ˜ æ­Œæ›²çƒ­åº¦
- åˆ«åæ ‡ç­¾ï¼ˆå¦‚"ç”µå½±ã€Šé˜³å…‰å°ç¾å¥³ã€‹æœ€çƒ­é…ä¹"ï¼‰æ ‡æ³¨ç‰¹æ®Šåœºæ™¯

**æŠ€æœ¯é™åˆ¶**: å·²é€šè¿‡å¤šç§APIæ¥å£æµ‹è¯•ï¼ŒåŒ…æ‹¬æ­Œæ›²è¯¦æƒ…ã€æ­Œå•ä¿¡æ¯ã€æ­Œæ‰‹ä¿¡æ¯ç­‰ï¼Œå‡æ— æ³•ç¨³å®šè·å–é£æ ¼æ ‡ç­¾

## ğŸ“ æ›´æ–°è®¡åˆ’

- [ ] æ”¯æŒå¤šè´¦å·åˆ‡æ¢
- [ ] æ”¯æŒæ­Œå•æ¨é€
- [ ] æ”¯æŒæ­Œæ›²æœç´¢
- [ ] æ”¯æŒæ­Œè¯è·å–

## ğŸ“„ License

MIT
